---
tags:
  - 技术/NET
  - 技术/框架设计
---
当在设计一个大型框架时，应该决定如何将功能划分为由命名空间所代表的功能区。这种自上而下的设计是非常重要的，因为它可以确保包含在同一个命名空间中的类型可以很好的结合在一起。命名空间的设计是迭代的。可以预见的是，随着在几个版本中将更多的类型添加到同一个命名空间中，我们必须对命名空间的设计进行调整。这种哲学带来了以下准则：

---

- **DO** 使用命名空间将类型基于功能领域划分，组织成具有层次的结构。优化这个层次结构，以便框架的使用者可以更容易的找到他们想要的 API。

	*注解：与流行看法不同，命名空间的主要目的并非解决类型的命名冲突。如同该准则所表明的那样，命名空间的主要目的是将类型组织成一个具有相关性，易于浏览和理解的层次结构。*

---

- **AVOID**  避免很深的命名空间层次结构。这样的层次结构难以浏览，因为用户浏览时必须要经常进行回退。

---

- **AVOID** 避免使用过多的命名空间。框架使用者无需导入很多命名空间，如果可以，在通用场景中需要一起使用的类型应该放在同一个命名空间中，该准则并非“只使用一个命名空间”，而是鼓励在设计中寻求适当的平衡。

	*注解：IntelliSense 提供了下拉列表，其中有接下来可能输入的内容或成员的使用方法，这个功能的成效与它提供的选项数量成反比。*

	*注解2：高级功能应该放在简单类型的命名空间的子空间中，例如基础的简单类型可能在 `System.Mail` ，更高阶的内容可能在 `System.Mail.Advanced` 中。

---

- **AVOID** 避免将为高级场景设计的类型和用于一般编程任务的类型放在同一个命名空间中。这使得框架的基础知识更容易被用户理解，也使得用户更容易在通用场景中使用框架。

---

- **DON'T**  不要只定义类型，而不指定命名空间。将相关的类型组织成有层次的结构，有助于解决潜在的类型命名冲突问题。

	*注解：命名空间虽然不能阻止命名冲突，但是还是可以有效减少冲突，我们可以在两个不同的程序集中定义名称一模一样的类，CLR 并不会为此感到困惑。*

```C#
	new MyType();
```

对应的 ILASM 编码：
```C#
IL_0000: newobj instance void [MyAssembly]MyNameSpace.MyType::.ctor()
```

